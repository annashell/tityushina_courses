{"ast":null,"code":"import{useLocation,useParams,Link}from'react-router-dom';import{useState,useEffect}from'react';import{getCourseContent}from'../../api/courses';import'./SideMenu.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function SideMenu(){const{courseId}=useParams();const location=useLocation();const[chapters,setChapters]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);useEffect(()=>{const fetchChapters=async()=>{try{setLoading(true);// Если мы на странице курса\nif(courseId&&location.pathname.startsWith('/tityushina_courses/course/')){const data=await getCourseContent(courseId);setChapters(data.chapters);setError(null);}else{setChapters([]);}}catch(err){setError('Не удалось загрузить содержание курса');setChapters([]);}finally{setLoading(false);}};fetchChapters();},[courseId,location.pathname]);// Используем location.pathname вместо location\nif(loading){return/*#__PURE__*/_jsx(\"aside\",{className:\"side-menu\",children:/*#__PURE__*/_jsx(\"div\",{className:\"loading-message\",children:\"\\u0417\\u0430\\u0433\\u0440\\u0443\\u0437\\u043A\\u0430 \\u0441\\u043E\\u0434\\u0435\\u0440\\u0436\\u0430\\u043D\\u0438\\u044F...\"})});}if(error){return/*#__PURE__*/_jsx(\"aside\",{className:\"side-menu\",children:/*#__PURE__*/_jsx(\"div\",{className:\"error-message\",children:error})});}return/*#__PURE__*/_jsx(\"aside\",{className:\"side-menu\",children:chapters.length>0?/*#__PURE__*/_jsxs(\"div\",{className:\"course-contents\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"\\u0421\\u043E\\u0434\\u0435\\u0440\\u0436\\u0430\\u043D\\u0438\\u0435 \\u043A\\u0443\\u0440\\u0441\\u0430\"}),/*#__PURE__*/_jsx(\"ul\",{children:chapters.map(chapter=>/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(Link,{to:\"/tityushina_courses/course/\".concat(courseId,\"/chapter/\").concat(chapter.id),className:\"chapter-link\",children:chapter.title})},chapter.id))})]}):/*#__PURE__*/_jsx(\"div\",{className:\"empty-menu\"})});}export default SideMenu;","map":{"version":3,"names":["useLocation","useParams","Link","useState","useEffect","getCourseContent","jsx","_jsx","jsxs","_jsxs","SideMenu","courseId","location","chapters","setChapters","loading","setLoading","error","setError","fetchChapters","pathname","startsWith","data","err","className","children","length","map","chapter","to","concat","id","title"],"sources":["D:/projects/tityushina_courses/src/components/SideMenu/SideMenu.jsx"],"sourcesContent":["import { useLocation, useParams, Link } from 'react-router-dom';\r\nimport { useState, useEffect } from 'react';\r\nimport { getCourseContent } from '../../api/courses';\r\nimport './SideMenu.css';\r\n\r\nfunction SideMenu() {\r\n    const { courseId } = useParams();\r\n    const location = useLocation();\r\n    const [chapters, setChapters] = useState([]);\r\n    const [loading, setLoading] = useState(true);\r\n    const [error, setError] = useState(null);\r\n\r\n    useEffect(() => {\r\n        const fetchChapters = async () => {\r\n            try {\r\n                setLoading(true);\r\n\r\n                // Если мы на странице курса\r\n                if (courseId && location.pathname.startsWith('/tityushina_courses/course/')) {\r\n                    const data = await getCourseContent(courseId);\r\n                    setChapters(data.chapters);\r\n                    setError(null);\r\n                } else {\r\n                    setChapters([]);\r\n                }\r\n            } catch (err) {\r\n                setError('Не удалось загрузить содержание курса');\r\n                setChapters([]);\r\n            } finally {\r\n                setLoading(false);\r\n            }\r\n        };\r\n\r\n        fetchChapters();\r\n    }, [courseId, location.pathname]); // Используем location.pathname вместо location\r\n\r\n    if (loading) {\r\n        return (\r\n            <aside className=\"side-menu\">\r\n                <div className=\"loading-message\">Загрузка содержания...</div>\r\n            </aside>\r\n        );\r\n    }\r\n\r\n    if (error) {\r\n        return (\r\n            <aside className=\"side-menu\">\r\n                <div className=\"error-message\">{error}</div>\r\n            </aside>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <aside className=\"side-menu\">\r\n            {chapters.length > 0 ? (\r\n                <div className=\"course-contents\">\r\n                    <h3>Содержание курса</h3>\r\n                    <ul>\r\n                        {chapters.map(chapter => (\r\n                            <li key={chapter.id}>\r\n                                <Link\r\n                                    to={`/tityushina_courses/course/${courseId}/chapter/${chapter.id}`}\r\n                                    className=\"chapter-link\"\r\n                                >\r\n                                    {chapter.title}\r\n                                </Link>\r\n                            </li>\r\n                        ))}\r\n                    </ul>\r\n                </div>\r\n            ) : (\r\n                <div className=\"empty-menu\"/>\r\n            )}\r\n        </aside>\r\n    );\r\n}\r\n\r\nexport default SideMenu;"],"mappings":"AAAA,OAASA,WAAW,CAAEC,SAAS,CAAEC,IAAI,KAAQ,kBAAkB,CAC/D,OAASC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAC3C,OAASC,gBAAgB,KAAQ,mBAAmB,CACpD,MAAO,gBAAgB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAExB,QAAS,CAAAC,QAAQA,CAAA,CAAG,CAChB,KAAM,CAAEC,QAAS,CAAC,CAAGV,SAAS,CAAC,CAAC,CAChC,KAAM,CAAAW,QAAQ,CAAGZ,WAAW,CAAC,CAAC,CAC9B,KAAM,CAACa,QAAQ,CAAEC,WAAW,CAAC,CAAGX,QAAQ,CAAC,EAAE,CAAC,CAC5C,KAAM,CAACY,OAAO,CAAEC,UAAU,CAAC,CAAGb,QAAQ,CAAC,IAAI,CAAC,CAC5C,KAAM,CAACc,KAAK,CAAEC,QAAQ,CAAC,CAAGf,QAAQ,CAAC,IAAI,CAAC,CAExCC,SAAS,CAAC,IAAM,CACZ,KAAM,CAAAe,aAAa,CAAG,KAAAA,CAAA,GAAY,CAC9B,GAAI,CACAH,UAAU,CAAC,IAAI,CAAC,CAEhB;AACA,GAAIL,QAAQ,EAAIC,QAAQ,CAACQ,QAAQ,CAACC,UAAU,CAAC,6BAA6B,CAAC,CAAE,CACzE,KAAM,CAAAC,IAAI,CAAG,KAAM,CAAAjB,gBAAgB,CAACM,QAAQ,CAAC,CAC7CG,WAAW,CAACQ,IAAI,CAACT,QAAQ,CAAC,CAC1BK,QAAQ,CAAC,IAAI,CAAC,CAClB,CAAC,IAAM,CACHJ,WAAW,CAAC,EAAE,CAAC,CACnB,CACJ,CAAE,MAAOS,GAAG,CAAE,CACVL,QAAQ,CAAC,uCAAuC,CAAC,CACjDJ,WAAW,CAAC,EAAE,CAAC,CACnB,CAAC,OAAS,CACNE,UAAU,CAAC,KAAK,CAAC,CACrB,CACJ,CAAC,CAEDG,aAAa,CAAC,CAAC,CACnB,CAAC,CAAE,CAACR,QAAQ,CAAEC,QAAQ,CAACQ,QAAQ,CAAC,CAAC,CAAE;AAEnC,GAAIL,OAAO,CAAE,CACT,mBACIR,IAAA,UAAOiB,SAAS,CAAC,WAAW,CAAAC,QAAA,cACxBlB,IAAA,QAAKiB,SAAS,CAAC,iBAAiB,CAAAC,QAAA,CAAC,kHAAsB,CAAK,CAAC,CAC1D,CAAC,CAEhB,CAEA,GAAIR,KAAK,CAAE,CACP,mBACIV,IAAA,UAAOiB,SAAS,CAAC,WAAW,CAAAC,QAAA,cACxBlB,IAAA,QAAKiB,SAAS,CAAC,eAAe,CAAAC,QAAA,CAAER,KAAK,CAAM,CAAC,CACzC,CAAC,CAEhB,CAEA,mBACIV,IAAA,UAAOiB,SAAS,CAAC,WAAW,CAAAC,QAAA,CACvBZ,QAAQ,CAACa,MAAM,CAAG,CAAC,cAChBjB,KAAA,QAAKe,SAAS,CAAC,iBAAiB,CAAAC,QAAA,eAC5BlB,IAAA,OAAAkB,QAAA,CAAI,6FAAgB,CAAI,CAAC,cACzBlB,IAAA,OAAAkB,QAAA,CACKZ,QAAQ,CAACc,GAAG,CAACC,OAAO,eACjBrB,IAAA,OAAAkB,QAAA,cACIlB,IAAA,CAACL,IAAI,EACD2B,EAAE,+BAAAC,MAAA,CAAgCnB,QAAQ,cAAAmB,MAAA,CAAYF,OAAO,CAACG,EAAE,CAAG,CACnEP,SAAS,CAAC,cAAc,CAAAC,QAAA,CAEvBG,OAAO,CAACI,KAAK,CACZ,CAAC,EANFJ,OAAO,CAACG,EAOb,CACP,CAAC,CACF,CAAC,EACJ,CAAC,cAENxB,IAAA,QAAKiB,SAAS,CAAC,YAAY,CAAC,CAC/B,CACE,CAAC,CAEhB,CAEA,cAAe,CAAAd,QAAQ","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}